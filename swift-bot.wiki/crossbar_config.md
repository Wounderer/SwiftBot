# Crossbar.io configuration

### Create required env

```shell script
mkdir -p /opt/swiftbot/crossbar && cd /opt/swiftbot/crossbar  && crossbar init
```

### Edit config file  **/opt/swiftbot/crossbar/.crossbar/config.json**

Create unix socket
```shell script
mkfifo /opt/swiftbot/socket1
```

### Configure crossbar node

[Read official documentation before](https://crossbar.io/docs/Node-Configuration/)

```JSON
{
   "$schema":"https://raw.githubusercontent.com/crossbario/crossbar/master/crossbar.json",
   "version":2,
   "controller":{
      
   },
   "workers":[
      {
         "type":"router",
         "realms":[
            {
               "name":"orderbooks",
               "roles":[
                  {
                     "name":"anonymous",
                     "permissions":[
                        {
                           "uri":"",
                           "match":"prefix",
                           "allow":{
                              "call":true,
                              "register":true,
                              "publish":true,
                              "subscribe":true
                           },
                           "disclose":{
                              "caller":false,
                              "publisher":false
                           },
                           "cache":true
                        }
                     ]
                  }
               ]
            },
            {
               "name":"swiftbot",
               "roles":[
                  {
                     "name":"wsuser",
                     "permissions":[
                        {
                           "uri":"",
                           "match":"prefix",
                           "allow":{
                              "call":true,
                              "register":true,
                              "publish":true,
                              "subscribe":true
                           },
                           "disclose":{
                              "caller":false,
                              "publisher":false
                           },
                           "cache":true
                        }
                     ]
                  },
                  {
                     "name":"anonymous",
                     "permissions":[
                        {
                           "uri":"",
                           "match":"prefix",
                           "allow":{
                              "call":true,
                              "register":true,
                              "publish":true,
                              "subscribe":true
                           },
                           "disclose":{
                              "caller":false,
                              "publisher":false
                           },
                           "cache":true
                        }
                     ]
                  }
               ]
            }
         ],
         "transports":[
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"unix",
                  "path":"/opt/swiftbot/socket1"
               }
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8081,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8082,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8083,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8084,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8085,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8091,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8092,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8093,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8094,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8193
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8192
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8095,
                  "backlog":1024
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"rawsocket",
               "endpoint":{
                  "type":"tcp",
                  "port":8096
               },
               "serializers":[
                  "cbor",
                  "msgpack",
                  "json"
               ]
            },
            {
               "type":"web",
               "endpoint":{
                  "type":"tcp",
                  "port":8080
               },
               "paths":{
                  "ws":{
                     "type":"websocket",
                     "auth":{
                        "wampcra":{
                           "type":"static",
                           "users":{
                              "username":{
                                 "secret":"userpass",
                                 "role":"wsuser"
                              }
                           }
                        }
                     },
                     "serializers":[
                        "cbor",
                        "msgpack",
                        "json"
                     ]
                  },
                  "wsob":{
                     "type":"websocket",
                     "serializers":[
                        "cbor",
                        "msgpack",
                        "json"
                     ]
                  },
                  "info":{
                     "type":"nodeinfo"
                  }
               }
            }
         ]
      }
   ]
}

```

## SWIFT.bot - [Back to home](HomePage.md)